<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <meta name="description" content=""/>
    <meta name="author" content=""/>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <link rel="stylesheet" type="text/css" th:href="@{/css/login.css}" href="../static/css/login.css" media="screen" />
    <script th:src="@{/js/login.js}" src="../static/js/login.js" type="text/javascript"></script>
    <title>Bootcamp Library</title>
    <!-- Bootstrap Core CSS -->
    <link th:href="@{/vendor/bootstrap/css/bootstrap.min.css}" href="../static/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
    <link th:href="@{/css/creative.css}" href="../static/css/creative.css" rel="stylesheet" />
    
    <!-- Custom Fonts -->
    <link th:href="@{/vendor/font-awesome/css/font-awesome.min.css}" href="../static/vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css' />
    <link href='https://fonts.googleapis.com/css?family=Merriweather:400,300,300italic,400italic,700,700italic,900,900italic' rel='stylesheet' type='text/css' />
    <!-- Plugin CSS -->
    <link th:href="@{/vendor/magnific-popup/magnific-popup.css}" href="../static/vendor/magnific-popup/magnific-popup.css" rel="stylesheet" />
    <!-- Theme CSS -->
  <!--  <link href="css/creative.min.css" rel="stylesheet"> -->
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    
    <!--  jQuery -->
<script type="text/javascript" src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
<!-- Isolated Version of Bootstrap, not needed if your site already uses Bootstrap -->
<link rel="stylesheet" href="https://formden.com/static/cdn/bootstrap-iso.css" />
<!-- Bootstrap Date-Picker Plugin -->
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.4.1/js/bootstrap-datepicker.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.4.1/css/bootstrap-datepicker3.css"/>
<!--formden.js communicates with FormDen server to validate fields and submit via AJAX -->
<script type="text/javascript" src="https://formden.com/static/cdn/formden.js"></script>
<!-- Special version of Bootstrap that is isolated to content wrapped in .bootstrap-iso -->
<link rel="stylesheet" href="https://formden.com/static/cdn/bootstrap-iso.css" />
<!--Font Awesome (added because you use icons in your prepend/append)-->
<link rel="stylesheet" href="https://formden.com/static/cdn/font-awesome/4.4.0/css/font-awesome.min.css" />
<!-- Inline CSS based on choices in "Settings" tab -->
<style>.bootstrap-iso .formden_header h2, .bootstrap-iso .formden_header p, .bootstrap-iso form{font-family: Arial, Helvetica, sans-serif; color: black}.bootstrap-iso form button, .bootstrap-iso form button:hover{color: white !important;} .asteriskField{color: red;}</style>
</head>
<body > 
    <div id="logout">
    <a th:href="@{login}" href="login.html" style="margin-top:20px;max-width:80px;width:auto;background-color:black;
     border:none;margin-left:30px;margin-bottom:30px;padding-left:20px;color:white;padding-right:20px;padding-top:10px;padding-bottom:10px;margin-right:10px;margin-top:20px">LOGOUT</a>
  <a th:href="@{employeeIndex}" href="employeeIndex.html" style="margin-top:20px;max-width:80px;width:auto;background-color:black;
     border:none;margin-left:30px;margin-bottom:30px;padding-left:20px;color:white;padding-right:20px;padding-top:10px;padding-bottom:10px;margin-right:10px;margin-top:20px;">HOME</a>
    
    </div>
    
<br />
<h4 id="requests2">BOOKS REQUESTED TO GIVE</h4>
<form class="login-form" id="submitForm" onsubmit=" this.reset();">          <!--action="#" th:action="@{/givebook}"  method="post"-->
<table id="holder">
    
    
    <td id="reqlist" style="width:50%;"> 
    <div id="forReload">
    <table id="excelDataTable" border="1" > <!--onLoad="buildHtmlTable1('#excelDataTable');"-->
    
    

		        	<tr>
                    <th>Name</th>
                    <th>Book</th>
                    <th>Book isbn number</th>
                    <th>Give</th>
                
                </tr>
                <tr th:each="sb : ${books}">
                    <td th:text="${sb.username}"></td>
                    <td th:text="${sb.title}"></td>
                    <td th:text="${sb.isbn}"></td>
                    <td >
                            
                            <input type="submit" th:value="${sb.isbn+','+sb.username}" 	id="submitButton" name="isbn"  
                            style="color:transparent; width:45px;"/>
                            
                    </td>
                </tr>

				
				
  </table>
  </div>
  </td>
<td id="reqlist">
<!-- HTML Form (wrapped in a .bootstrap-iso div) -->
<div class="bootstrap-iso">
 <div class="container-fluid">
  <div class="row">
   <div class="col-md-6 col-sm-6 col-xs-12">
    
     <div class="form-group ">
      <label class="control-label col-sm-2 requiredField" for="date" >
       Date
       
      </label>
      <div class="col-sm-10">
       <div class="input-group">
        <div class="input-group-addon">
         <i class="fa fa-calendar">
         </i>
        </div>
        <input class="form-control" id="date" name="date" placeholder="MM/DD/YYYY" type="text" />
       </div>
      </div>
     </div>
     <div class="form-group">
      <div class="col-sm-10 col-sm-offset-2">
       
      </div>
     </div>

   </div>
  </div>
 </div>
</div>

</td>
 </table>
 </form>
<br />
<table id="holder">
    <td id="reqlist" style="width:50%;">
    <form class="login-form" id="submitForm1" onsubmit=" this.reset();"> <!--action="#" method="post" th:action="@{/takebook}" -->
                 <table id="excelDataTable2" border="1" > <!-- onLoad="buildHtmlTable2('#excelDataTable2');-->
                 
                 
                 <tr>
                    <th>Name</th>
                    <th>Book</th>
                    <th>Return date</th>
                    <th>Book isbn number</th>
                    <th>Take</th>
                
                </tr>
                <tr th:each="sb : ${books1}">
                    <td th:text="${sb.username}"></td>
                    <td th:text="${sb.title}"></td>
                    <td th:text="${sb.return_date}"></td>
                    <td th:text="${sb.isbn}"></td>
                    <td >
                        <form class="login-form" action="#" method="post" th:action="@{/takebook}">
                            <input style="display: none;" id="usernameValue" th:value="${sb.username}" name="username" />
                            <input type="submit" id="submitButton1" th:value="${sb.isbn}" name="isbn"  
                            style="color:transparent; width:45px;"/>
                        </form>
                    </td>
                </tr>
                
                
  </table>
  </form>
                </td>
                
</table>
<center>
<h4 id="requests2">BOOKS REQUESTED TO TAKE</h4>
</center>
    
    <!-- jQuery -->
    <script th:src="@{/vendor/jquery/jquery.min.js}" src="../static/vendor/jquery/jquery.min.js"></script>
    <!-- Bootstrap Core JavaScript -->
    <script th:src="@{/vendor/bootstrap/js/bootstrap.min.js}" src="../static/vendor/bootstrap/js/bootstrap.min.js"></script>
    <!-- Plugin JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.3/jquery.easing.min.js"></script>
    <script th:src="@{/vendor/scrollreveal/scrollreveal.min.js}" src="../static/vendor/scrollreveal/scrollreveal.min.js"></script>
    <script th:src="@{/vendor/magnific-popup/jquery.magnific-popup.min.js}" src="../static/vendor/magnific-popup/jquery.magnific-popup.min.js"></script>
    <!-- Theme JavaScript -->
    <script th:src="@{/js/creative.min.js}" src="../static/js/creative.min.js"></script>
    <!-- Extra JavaScript/CSS added manually in "Settings" tab -->
<!-- Include jQuery -->
<script type="text/javascript" src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
<!-- Include Date Range Picker -->
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.4.1/js/bootstrap-datepicker.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.4.1/css/bootstrap-datepicker3.css"/>
<script>
    $(document).ready(function(){
        var date_input=$('input[name="date"]'); //our date input has the name "date"
        var container=$('.bootstrap-iso form').length>0 ? $('.bootstrap-iso form').parent() : "body";
        date_input.datepicker({
            format: 'mm/dd/yyyy',
            container: container,
            todayHighlight: true,
            autoclose: true,
        })
    })

	jQuery(document).ready(
		
	  $("#excelDataTable").click(function() {
	  event.preventDefault(); //neatllauj lapai parladeties
	  
	  var value = document.getElementById("submitButton").value;
	  console.log(value);
	  var date = document.getElementById("date").value;
	  console.log(date);
	  var array = [];
	  array = value.split(",");
	  var isbn = array[0];
	  var username = array[1];
	  console.log(isbn);
	  console.log(username);
	  var data = {};
	  $("#submitButton").prop("disabled", true);
	  
	  $.ajax({
			type: 'post',
            url: '/bootcamp/givebook',
            data: {
                'isbn': isbn,
                'username': username,
				'date' : date
            },
			success: function(data) {
			//cosole.log(data);
				//document.getElementById("excelDataTable").style.display="none";
				//$("#submitButton").prop("disabled", false);
				setTimeout(function() {
				$("#submitButton").prop("disabled", false);
	          		$("#submitForm").load(document.URL +' #submitForm');
	        	}, 500);
				//$("#excelDataTable").load(document.URL +' #forReload');
				
				//$("#submitForm1").load(document.URL +' #submitForm1');
			}
			

 	});
 	//$("#forReload").load(document.URL +' #forReload');
 	//$("#submitForm1").load(document.URL +' #submitForm1');
 	
			
 	}));
 		$("#excelDataTable2").click(function() {
	  event.preventDefault(); //neatllauj lapai parladeties
	  
	  var isbn = document.getElementById("submitButton1").value;
	  var username = document.getElementById("usernameValue").value;

	  console.log(isbn);
	  console.log(username);
	  $("#submitButton1").prop("disabled", true);
	  var data = {};
	  $.ajax({
			type: 'post',
            url: '/bootcamp/takebook',
            data: {
                'isbn': isbn,
                'username': username
            },
			success: function(data) {
			//cosole.log(data);
			setTimeout(function() {
			$("#submitButton").prop("disabled", false);
	          		$("#submitForm1").load(document.URL +' #submitForm1');
	        	}, 500);
				//document.getElementById("excelDataTable2").style.display="none";
				//$("#forReload").load(document.URL +' #forReload');
				
				//$("#submitButton1").prop("disabled", false);
			}
 	});
 	});
</script>
</body>
</html>